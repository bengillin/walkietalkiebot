/* iMessage Theme - Apple HIG / iOS design language */
[data-theme="imessage"] {
  /* Background Colors - iOS light mode */
  --bg-primary: #ffffff;
  --bg-secondary: #f2f2f7;
  --bg-tertiary: #e5e5ea;
  --color-bg-secondary: #f2f2f7;

  /* Text Colors - iOS system colors */
  --text-primary: #000000;
  --text-secondary: #3c3c43;
  --text-muted: #8e8e93;
  --text-tertiary: #aeaeb2;

  /* Accent Colors - iMessage blue */
  --accent: #007aff;
  --accent-hover: #0056b3;
  --accent-glow: rgba(0, 122, 255, 0.2);
  --accent-soft: rgba(0, 122, 255, 0.1);

  /* Secondary accent - iOS green */
  --accent-secondary: #34c759;

  /* Message Colors */
  --message-user-bg: #007aff;
  --message-user-text: #ffffff;
  --message-assistant-bg: #e5e5ea;
  --message-assistant-text: #000000;

  /* Robot Avatar Colors */
  --robot-body: #f2f2f7;
  --robot-shadow: #d1d1d6;
  --robot-highlight: #ffffff;

  /* Screen States */
  --screen-idle: #007aff;
  --screen-happy: #ff9f0a;
  --screen-error: #ff3b30;
  --screen-listening: #5ac8fa;
  --screen-thinking: #af52de;

  /* Borders & Shadows - iOS hairline style */
  --border-subtle: rgba(60, 60, 67, 0.06);
  --border-light: rgba(60, 60, 67, 0.12);
  --border-color: rgba(60, 60, 67, 0.12);
  --color-border: rgba(60, 60, 67, 0.18);
  --shadow-soft: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-glow: none;

  /* Header specific */
  --header-bg: rgba(249, 249, 249, 0.94);
  --header-border: rgba(60, 60, 67, 0.18);
  --header-text: #000000;

  /* Button styling - iOS style */
  --btn-bg: #ffffff;
  --btn-hover: #f2f2f7;
  --btn-border: rgba(60, 60, 67, 0.12);
  --btn-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);

  /* Input styling */
  --input-bg: #ffffff;
  --input-border: rgba(60, 60, 67, 0.18);

  /* Modal */
  --modal-bg: #ffffff;
  --modal-overlay: rgba(0, 0, 0, 0.4);

  /* Typography - SF Pro */
  --font-family: -apple-system, 'SF Pro Text', 'SF Pro Display', BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-bold: 600;
  --title-font: -apple-system, 'SF Pro Display', BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
  --title-style: normal;
  --title-transform: none;
  --letter-spacing: -0.01em;

  /* Radius - iOS rounded rects */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-full: 9999px;
}

/* ============================================
   Body & Root
   ============================================ */
[data-theme="imessage"] html,
[data-theme="imessage"] body {
  background: #ffffff;
  background-image: none;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* ============================================
   Header - Frosted glass navigation bar
   ============================================ */
[data-theme="imessage"] .app__header {
  background: rgba(249, 249, 249, 0.94);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.18);
  box-shadow: none;
  min-height: 56px;
  padding: 8px 16px;
}

[data-theme="imessage"] .app__title {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 700;
  font-size: 20px;
  font-style: normal;
  letter-spacing: -0.02em;
  text-transform: none;
  background: none;
  -webkit-background-clip: unset;
  -webkit-text-fill-color: #000000;
  background-clip: unset;
  text-shadow: none;
  filter: none;
}

/* Header buttons - iOS icon buttons */
[data-theme="imessage"] .app__header-btn {
  background: transparent;
  border: none;
  border-radius: 50%;
  color: #007aff;
  box-shadow: none;
  padding: 8px;
  width: 36px;
  height: 36px;
}

[data-theme="imessage"] .app__header-btn:hover {
  background: rgba(0, 122, 255, 0.08);
  color: #007aff;
  border: none;
}

[data-theme="imessage"] .app__header-btn:active {
  background: rgba(0, 122, 255, 0.15);
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .app__header-btn:disabled {
  color: #c7c7cc;
}

/* Eject button active */
[data-theme="imessage"] .app__header-btn--eject.app__header-btn--active {
  background: rgba(0, 122, 255, 0.12);
  border: none;
  color: #007aff;
}

/* Record button - iOS style red circle */
[data-theme="imessage"] .app__header-btn--record {
  background: #ff3b30;
  border: none;
  color: #ffffff;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3);
}

[data-theme="imessage"] .app__header-btn--record::before {
  display: none;
}

[data-theme="imessage"] .app__header-btn--record:hover:not(:disabled) {
  background: #ff453a;
  box-shadow: 0 2px 12px rgba(255, 59, 48, 0.4);
}

[data-theme="imessage"] .app__header-btn--record:active:not(:disabled) {
  transform: scale(0.95);
  box-shadow: 0 1px 4px rgba(255, 59, 48, 0.3);
}

[data-theme="imessage"] .app__header-btn--record.app__header-btn--recording {
  background: #ff3b30;
  box-shadow: 0 2px 12px rgba(255, 59, 48, 0.5);
  animation: imessage-record-pulse 1.2s ease-in-out infinite;
}

[data-theme="imessage"] .app__header-btn--record.app__header-btn--recording::before {
  display: none;
}

@keyframes imessage-record-pulse {
  0%, 100% { box-shadow: 0 2px 12px rgba(255, 59, 48, 0.4); }
  50% { box-shadow: 0 2px 20px rgba(255, 59, 48, 0.6); }
}

/* Tap to talk pulse */
[data-theme="imessage"] .app__header-btn--record.app__header-btn--tap-to-talk {
  animation: imessage-tap-pulse 1.5s ease-in-out infinite;
}

@keyframes imessage-tap-pulse {
  0%, 100% { transform: scale(1); box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3); }
  50% { transform: scale(1.08); box-shadow: 0 2px 16px rgba(255, 59, 48, 0.5); }
}

/* Recording indicator */
[data-theme="imessage"] .app__recording-indicator {
  background: rgba(255, 59, 48, 0.08);
  border-radius: 16px;
}

[data-theme="imessage"] .app__recording-dot {
  background: #ff3b30;
}

[data-theme="imessage"] .app__recording-label {
  color: #ff3b30;
  font-weight: 600;
  letter-spacing: 0;
  text-transform: none;
  font-size: 12px;
}

/* Liner notes indicator */
[data-theme="imessage"] .app__header-btn--has-notes::after {
  background: #ff9f0a;
  border-color: rgba(249, 249, 249, 0.94);
}

/* Conversation dropdown - iOS pill */
[data-theme="imessage"] .app__conversation-dropdown {
  background: rgba(0, 122, 255, 0.08);
  border-radius: 20px;
  padding: 8px 14px;
}

[data-theme="imessage"] .app__conversation-dropdown:hover {
  background: rgba(0, 122, 255, 0.14);
}

[data-theme="imessage"] .app__conversation-title {
  color: #000000;
  font-weight: 600;
  font-size: 16px;
}

/* Logo */
[data-theme="imessage"] .app__logo {
  height: 32px;
  margin-top: 8px;
  margin-bottom: 4px;
}

/* Avatar */
[data-theme="imessage"] .app__avatar-mini {
  width: 40px;
  height: 40px;
}

[data-theme="imessage"] .app__avatar-status {
  width: 40px;
  height: 40px;
}

/* Mobile menu */
[data-theme="imessage"] .app__mobile-menu-btn {
  background: transparent;
  border: none;
  color: #007aff;
}

[data-theme="imessage"] .app__mobile-menu {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

[data-theme="imessage"] .app__mobile-menu-item {
  color: #000000;
  font-size: 16px;
  padding: 12px 16px;
}

[data-theme="imessage"] .app__mobile-menu-item:hover {
  background: rgba(0, 122, 255, 0.06);
}

[data-theme="imessage"] .app__mobile-menu-item:active {
  background: rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .app__mobile-menu-item--danger {
  color: #ff3b30;
}

/* ============================================
   Main Content Area
   ============================================ */
[data-theme="imessage"] .app__main {
  background: #ffffff;
}

[data-theme="imessage"] .app__avatar-section {
  background: #f2f2f7;
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .app__error {
  color: #ff3b30;
  background: rgba(255, 59, 48, 0.06);
  border: 0.5px solid rgba(255, 59, 48, 0.2);
  border-radius: 12px;
}

/* Plan notification */
[data-theme="imessage"] .app__plan-notification {
  background: rgba(52, 199, 89, 0.08);
  border: 0.5px solid rgba(52, 199, 89, 0.25);
  border-radius: 12px;
  color: #34c759;
  font-weight: 500;
}

[data-theme="imessage"] .app__plan-notification:hover {
  background: rgba(52, 199, 89, 0.14);
}

/* Input bar */
[data-theme="imessage"] .app__input-bar {
  background: #ffffff;
  border-top: 0.5px solid rgba(60, 60, 67, 0.18);
}

/* ============================================
   Chat Timeline - iMessage conversation
   ============================================ */
[data-theme="imessage"] .chat-timeline {
  background: #ffffff;
}

/* Message bubbles - The signature iMessage look */
[data-theme="imessage"] .message-bubble {
  border-radius: 18px;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  border: none;
  box-shadow: none;
}

[data-theme="imessage"] .message-bubble.user {
  background: #007aff;
  color: #ffffff;
  border: none;
  border-radius: 18px 18px 4px 18px;
  box-shadow: none;
}

[data-theme="imessage"] .message-bubble.assistant {
  background: #e5e5ea;
  color: #000000;
  border: none;
  border-radius: 18px 18px 18px 4px;
  box-shadow: none;
}

/* Hide the default tail, iMessage uses border-radius for bubble shape */
[data-theme="imessage"] .message-bubble.assistant::after {
  display: none;
}

[data-theme="imessage"] .message-bubble.listening {
  background: rgba(0, 122, 255, 0.08);
  border: none;
  box-shadow: none;
}

[data-theme="imessage"] .message-bubble.thinking {
  background: #e5e5ea;
  color: #000000;
  border: none;
  border-radius: 18px 18px 18px 4px;
  box-shadow: none;
}

[data-theme="imessage"] .message-bubble.streaming {
  background: #e5e5ea;
  color: #000000;
  border: none;
  border-radius: 18px 18px 18px 4px;
  box-shadow: none;
}

/* Links in messages */
[data-theme="imessage"] .message-link {
  color: #007aff;
}

[data-theme="imessage"] .message-bubble.user .message-link {
  color: rgba(255, 255, 255, 0.9);
  text-decoration: underline;
}

/* Message status */
[data-theme="imessage"] .message-status {
  background: transparent;
  border: none;
  box-shadow: none;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  font-size: 12px;
  color: #8e8e93;
}

/* Message meta */
[data-theme="imessage"] .message-meta {
  color: #8e8e93;
}

[data-theme="imessage"] .message-meta__name--recording {
  color: #ff3b30;
}

/* Message images */
[data-theme="imessage"] .message-image-thumb {
  border-radius: 14px;
  border: none;
  box-shadow: none;
}

[data-theme="imessage"] .message-image-thumb:hover {
  transform: scale(1.02);
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.12);
}

[data-theme="imessage"] .message-image-analyzed {
  background: rgba(52, 199, 89, 0.9);
  border-radius: 10px;
}

/* Typing indicator - iOS bouncing dots */
[data-theme="imessage"] .typing-indicator span {
  width: 8px;
  height: 8px;
  background: #8e8e93;
  border: none;
  border-radius: 50%;
  box-shadow: none;
}

/* Code blocks in messages */
[data-theme="imessage"] .msg-code-block {
  background: rgba(0, 0, 0, 0.05);
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 8px;
}

[data-theme="imessage"] .message-bubble.user .msg-code-block {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.15);
}

[data-theme="imessage"] .msg-inline-code {
  background: rgba(0, 0, 0, 0.05);
  border-radius: 4px;
}

[data-theme="imessage"] .message-bubble.user .msg-inline-code {
  background: rgba(255, 255, 255, 0.15);
}

/* Headings in messages */
[data-theme="imessage"] .msg-heading--1 {
  color: #007aff;
}

/* Scrollbar */
[data-theme="imessage"] .chat-timeline::-webkit-scrollbar {
  width: 6px;
}

[data-theme="imessage"] .chat-timeline::-webkit-scrollbar-track {
  background: transparent;
}

[data-theme="imessage"] .chat-timeline::-webkit-scrollbar-thumb {
  background: rgba(60, 60, 67, 0.15);
  border-radius: 3px;
}

[data-theme="imessage"] .chat-timeline::-webkit-scrollbar-thumb:hover {
  background: rgba(60, 60, 67, 0.25);
}

/* ============================================
   Tool Badges - iOS pill chips
   ============================================ */
[data-theme="imessage"] .tool-badge {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 16px;
  box-shadow: none;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 500;
  text-transform: none;
  font-size: 12px;
  letter-spacing: 0;
  padding: 6px 12px;
  color: #3c3c43;
}

[data-theme="imessage"] .tool-badge .tool-name {
  color: #000000;
  font-weight: 600;
}

[data-theme="imessage"] .tool-badge .tool-input {
  color: #8e8e93;
}

[data-theme="imessage"] .tool-badge.running {
  border-color: rgba(0, 122, 255, 0.3);
  background: rgba(0, 122, 255, 0.06);
  color: #007aff;
  box-shadow: none;
}

[data-theme="imessage"] .tool-badge.running .tool-name,
[data-theme="imessage"] .tool-badge.running .tool-input {
  color: #007aff;
}

[data-theme="imessage"] .tool-badge.error {
  border-color: rgba(255, 59, 48, 0.3);
  background: rgba(255, 59, 48, 0.06);
  color: #ff3b30;
  box-shadow: none;
}

[data-theme="imessage"] .tool-badge.error .tool-name,
[data-theme="imessage"] .tool-badge.error .tool-input {
  color: #ff3b30;
}

[data-theme="imessage"] .tool-spinner {
  border-top-color: #007aff;
}

[data-theme="imessage"] .tool-complete {
  color: #34c759;
  font-weight: 600;
}

[data-theme="imessage"] .tool-error {
  color: #ff3b30;
  font-weight: 600;
}

/* Collapsible tools indicator */
[data-theme="imessage"] .collapsible-tools__indicator {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 16px;
  box-shadow: none;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 500;
  text-transform: none;
  font-size: 13px;
  letter-spacing: 0;
  color: #3c3c43;
  padding: 8px 14px;
}

[data-theme="imessage"] .collapsible-tools__indicator:hover {
  background: #e5e5ea;
  border-color: rgba(60, 60, 67, 0.18);
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .collapsible-tools__indicator.running {
  border-color: rgba(0, 122, 255, 0.3);
  background: rgba(0, 122, 255, 0.06);
  color: #007aff;
  box-shadow: none;
  animation: imessage-tool-pulse 2s ease-in-out infinite;
}

@keyframes imessage-tool-pulse {
  0%, 100% { background: rgba(0, 122, 255, 0.06); }
  50% { background: rgba(0, 122, 255, 0.12); }
}

[data-theme="imessage"] .collapsible-tools__indicator.error {
  border-color: rgba(255, 59, 48, 0.3);
  background: rgba(255, 59, 48, 0.06);
  color: #ff3b30;
  box-shadow: none;
}

[data-theme="imessage"] .collapsible-tools__count {
  color: inherit;
  font-weight: 600;
}

/* Avatar container */
[data-theme="imessage"] .chat-timeline__avatar-container {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 16px;
  box-shadow: none;
  padding: 16px;
}

/* ============================================
   Unified Input Bar - iOS message composer
   ============================================ */
[data-theme="imessage"] .unified-input-bar {
  background: rgba(249, 249, 249, 0.94);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-top: 0.5px solid rgba(60, 60, 67, 0.18);
  box-shadow: none;
  padding: 8px 12px;
}

[data-theme="imessage"] .unified-input-bar.listening {
  background: rgba(249, 249, 249, 0.94);
  border-top-color: #007aff;
  box-shadow: inset 0 1px 0 rgba(0, 122, 255, 0.1);
}

[data-theme="imessage"] .unified-input-bar__field {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 20px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  box-shadow: none;
  height: auto;
  padding: 8px 16px;
}

[data-theme="imessage"] .unified-input-bar__field:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .unified-input-bar__field::placeholder {
  color: #c7c7cc;
}

[data-theme="imessage"] .unified-input-bar__icon-btn {
  background: transparent;
  border: none;
  border-radius: 50%;
  color: #007aff;
  box-shadow: none;
}

[data-theme="imessage"] .unified-input-bar__icon-btn:hover:not(:disabled) {
  background: rgba(0, 122, 255, 0.08);
  transform: none;
  color: #007aff;
  border: none;
}

[data-theme="imessage"] .unified-input-bar__icon-btn.mic-active {
  background: #ff3b30;
  border: none;
  box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3);
  color: white;
  animation: imessage-mic-pulse 1.2s ease-in-out infinite;
}

@keyframes imessage-mic-pulse {
  0%, 100% { box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3); }
  50% { box-shadow: 0 2px 16px rgba(255, 59, 48, 0.5); }
}

/* Send button - iOS arrow-up circle */
[data-theme="imessage"] .unified-input-bar__send {
  background: #007aff;
  border: none;
  border-radius: 50%;
  box-shadow: none;
  color: #ffffff;
}

[data-theme="imessage"] .unified-input-bar__send:hover:not(:disabled) {
  background: #0056b3;
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .unified-input-bar__send:active:not(:disabled) {
  transform: scale(0.95);
  box-shadow: none;
}

/* ============================================
   Conversation Dropdown Sidebar
   ============================================ */
[data-theme="imessage"] .conversation-dropdown-panel {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

[data-theme="imessage"] .dropdown-new-btn {
  background: #007aff;
  border: none;
  border-radius: 10px;
  color: #ffffff;
  box-shadow: none;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0;
}

[data-theme="imessage"] .dropdown-new-btn:hover {
  background: #0056b3;
  border: none;
  color: #ffffff;
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .dropdown-new-btn:active {
  transform: scale(0.98);
  box-shadow: none;
}

[data-theme="imessage"] .dropdown-item {
  border-radius: 10px;
  border: none;
  margin-bottom: 2px;
}

[data-theme="imessage"] .dropdown-item:hover {
  background: rgba(0, 122, 255, 0.06);
  border: none;
  box-shadow: none;
}

[data-theme="imessage"] .dropdown-item.active {
  background: rgba(0, 122, 255, 0.1);
  border: none;
  box-shadow: none;
  color: #000000;
}

[data-theme="imessage"] .dropdown-item.active .dropdown-item-title,
[data-theme="imessage"] .dropdown-item.active .dropdown-item-meta {
  color: #000000;
}

[data-theme="imessage"] .dropdown-item-title {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  color: #000000;
}

[data-theme="imessage"] .dropdown-item-meta {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  text-transform: none;
  font-size: 12px;
  letter-spacing: 0;
  color: #8e8e93;
}

[data-theme="imessage"] .dropdown-item-context,
[data-theme="imessage"] .dropdown-item-delete {
  background: transparent;
  border: none;
  border-radius: 50%;
  box-shadow: none;
  color: #8e8e93;
}

[data-theme="imessage"] .dropdown-item-context:hover {
  background: rgba(0, 122, 255, 0.08);
  border: none;
  color: #007aff;
}

[data-theme="imessage"] .dropdown-item-delete:hover {
  background: rgba(255, 59, 48, 0.08);
  border: none;
  color: #ff3b30;
}

[data-theme="imessage"] .dropdown-context-info {
  background: #f2f2f7;
  border-top: 0.5px solid rgba(60, 60, 67, 0.12);
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  text-transform: none;
  color: #34c759;
}

/* ============================================
   Speaker Avatar
   ============================================ */
[data-theme="imessage"] .speaker-avatar__grille {
  background: linear-gradient(145deg, #f2f2f7 0%, #e5e5ea 100%);
  border: 1px solid rgba(60, 60, 67, 0.12);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

[data-theme="imessage"] .speaker-avatar--listening .speaker-avatar__grille {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 0 20px rgba(0, 122, 255, 0.2);
}

[data-theme="imessage"] .speaker-avatar--listening .speaker-avatar__hole {
  background: radial-gradient(circle at 50% 50%, #5ac8fa, #007aff);
  box-shadow: 0 0 6px rgba(0, 122, 255, 0.4);
}

[data-theme="imessage"] .speaker-avatar--speaking .speaker-avatar__grille {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 0 16px rgba(52, 199, 89, 0.2);
}

[data-theme="imessage"] .speaker-avatar--speaking .speaker-avatar__hole {
  background: radial-gradient(circle at 50% 50%, #30d158, #34c759);
}

[data-theme="imessage"] .speaker-avatar--happy .speaker-avatar__grille {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06), 0 0 20px rgba(255, 159, 10, 0.2);
}

/* ============================================
   Robot Avatar - Clean Apple style
   ============================================ */
[data-theme="imessage"] .robot__body {
  background: linear-gradient(145deg, #ffffff, #f2f2f7, #e5e5ea);
  border-color: rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .robot__screen {
  background: linear-gradient(180deg, #007aff, #0056b3);
  border-radius: 12px;
}

[data-theme="imessage"] .robot__antenna-tip {
  background: #007aff;
  box-shadow: 0 0 8px rgba(0, 122, 255, 0.4);
}

[data-theme="imessage"] .robot__led {
  background: #34c759;
  box-shadow: 0 0 6px rgba(52, 199, 89, 0.5);
}

[data-theme="imessage"] .robot__base {
  background: linear-gradient(180deg, #e5e5ea, #d1d1d6);
}

[data-theme="imessage"] .robot--listening .robot__screen {
  background: linear-gradient(180deg, #5ac8fa, #007aff);
}

[data-theme="imessage"] .robot--listening .robot__antenna-tip {
  background: #5ac8fa;
  box-shadow: 0 0 12px rgba(90, 200, 250, 0.5);
}

[data-theme="imessage"] .robot--thinking .robot__screen {
  background: linear-gradient(180deg, #af52de, #8944ab);
}

[data-theme="imessage"] .robot--thinking .robot__antenna-tip {
  background: #af52de;
  box-shadow: 0 0 12px rgba(175, 82, 222, 0.5);
}

[data-theme="imessage"] .robot--happy .robot__screen {
  background: linear-gradient(180deg, #ff9f0a, #ff8800);
}

[data-theme="imessage"] .robot--confused .robot__screen {
  background: linear-gradient(180deg, #ff453a, #ff3b30);
}

/* ============================================
   Settings Drawer - iOS grouped table view
   ============================================ */
[data-theme="imessage"] .settings__drawer {
  background: #f2f2f7;
  border-top: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 16px 16px 0 0;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
}

[data-theme="imessage"] .settings__header {
  background: rgba(242, 242, 247, 0.94);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.18);
  padding: 12px 16px;
}

[data-theme="imessage"] .settings__title {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 700;
  font-style: normal;
  text-transform: none;
  letter-spacing: -0.01em;
  color: #000000;
  font-size: 20px;
}

[data-theme="imessage"] .settings__close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
  box-shadow: none;
  width: 30px;
  height: 30px;
}

[data-theme="imessage"] .settings__close:hover {
  background: rgba(60, 60, 67, 0.12);
  border: none;
  color: #3c3c43;
}

/* Settings section titles - iOS grouped header */
[data-theme="imessage"] .settings__section-title {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  color: #8e8e93;
  font-size: 13px;
  margin-top: 24px;
  margin-bottom: 8px;
  padding-left: 16px;
}

[data-theme="imessage"] .settings__section-desc {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #8e8e93;
  font-size: 13px;
  padding-left: 16px;
}

/* Toggle rows - iOS grouped table cells */
[data-theme="imessage"] .settings__toggle {
  background: #ffffff;
  border: none;
  border-radius: 0;
  padding: 12px 16px;
  box-shadow: none;
}

[data-theme="imessage"] .settings__toggle:hover {
  background: #ffffff;
  border: none;
}

[data-theme="imessage"] .settings__toggle-label {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: #000000;
  font-size: 17px;
}

/* Toggle switch - iOS style */
[data-theme="imessage"] .settings__slider {
  width: 51px;
  height: 31px;
  background: rgba(120, 120, 128, 0.16);
  border: none;
  border-radius: 15.5px;
  box-shadow: none;
}

[data-theme="imessage"] .settings__slider::before {
  width: 27px;
  height: 27px;
  top: 2px;
  left: 2px;
  background: #ffffff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15), 0 1px 1px rgba(0, 0, 0, 0.06);
}

[data-theme="imessage"] .settings__slider::after {
  display: none;
}

[data-theme="imessage"] .settings__toggle input:checked + .settings__slider {
  background: #34c759;
  border: none;
}

[data-theme="imessage"] .settings__toggle input:checked + .settings__slider::before {
  transform: translateX(20px);
  background: #ffffff;
  border: none;
}

/* Text inputs - iOS style */
[data-theme="imessage"] .settings__text-input {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  box-shadow: none;
}

[data-theme="imessage"] .settings__text-input:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .settings__text-input::placeholder {
  color: #c7c7cc;
}

[data-theme="imessage"] .settings__input-label {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: #8e8e93;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  font-size: 13px;
}

[data-theme="imessage"] .settings__optional {
  color: #c7c7cc;
}

[data-theme="imessage"] .settings__hint {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #8e8e93;
  font-size: 13px;
}

/* Range slider */
[data-theme="imessage"] .settings__range-row input[type="range"] {
  height: 4px;
  background: rgba(120, 120, 128, 0.16);
  border: none;
  border-radius: 2px;
  box-shadow: none;
}

[data-theme="imessage"] .settings__range-row input[type="range"]::-webkit-slider-thumb {
  width: 28px;
  height: 28px;
  background: #ffffff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15), 0 1px 1px rgba(0, 0, 0, 0.06);
}

[data-theme="imessage"] .settings__range-value {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  background: transparent;
  border: none;
  border-radius: 0;
  padding: 0;
  color: #8e8e93;
  text-shadow: none;
}

/* Session status */
[data-theme="imessage"] .settings__session {
  background: #ffffff;
  border: none;
  border-radius: 10px;
  box-shadow: none;
}

[data-theme="imessage"] .settings__session-status {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  color: #8e8e93;
}

[data-theme="imessage"] .settings__session-status--connected {
  color: #34c759;
  text-shadow: none;
}

[data-theme="imessage"] .settings__session-disconnect {
  background: transparent;
  border: none;
  border-radius: 8px;
  color: #ff3b30;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  box-shadow: none;
}

[data-theme="imessage"] .settings__session-disconnect:hover {
  background: rgba(255, 59, 48, 0.08);
  border: none;
  color: #ff3b30;
}

/* Divider */
[data-theme="imessage"] .settings__divider {
  height: 0.5px;
  background: rgba(60, 60, 67, 0.12);
  margin: 0;
}

/* Subsection */
[data-theme="imessage"] .settings__subsection {
  background: #ffffff;
  border: none;
  border-left: none;
  border-radius: 10px;
  padding: 12px 16px;
  margin-left: 0;
}

/* API form */
[data-theme="imessage"] .settings__api-form input {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  box-shadow: none;
}

[data-theme="imessage"] .settings__api-form input:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .settings__api-form input::placeholder {
  color: #c7c7cc;
}

[data-theme="imessage"] .settings__api-form button {
  background: #007aff;
  border: none;
  border-radius: 10px;
  color: #ffffff;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0;
  box-shadow: none;
}

[data-theme="imessage"] .settings__api-form button:hover:not(:disabled) {
  background: #0056b3;
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .settings__api-form button:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: none;
}

[data-theme="imessage"] .settings__api-link {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: #007aff;
}

[data-theme="imessage"] .settings__api-link:hover {
  color: #0056b3;
}

/* Advanced section */
[data-theme="imessage"] .settings__advanced-toggle {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  color: #007aff;
  font-size: 15px;
}

[data-theme="imessage"] .settings__advanced-toggle:hover {
  color: #0056b3;
}

/* Reset button */
[data-theme="imessage"] .settings__reset-btn {
  background: transparent;
  border: none;
  border-radius: 10px;
  color: #ff3b30;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  box-shadow: none;
  font-size: 15px;
}

[data-theme="imessage"] .settings__reset-btn:hover {
  background: rgba(255, 59, 48, 0.06);
  border: none;
  color: #ff3b30;
}

/* Export button */
[data-theme="imessage"] .settings__export-btn {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #007aff;
  box-shadow: none;
}

[data-theme="imessage"] .settings__export-btn:hover {
  background: rgba(0, 122, 255, 0.06);
}

/* Integration status */
[data-theme="imessage"] .settings__integration-status--active {
  background: rgba(52, 199, 89, 0.08);
  color: #34c759;
}

/* Scrollbar */
[data-theme="imessage"] .settings__drawer::-webkit-scrollbar {
  width: 6px;
}

[data-theme="imessage"] .settings__drawer::-webkit-scrollbar-track {
  background: transparent;
}

[data-theme="imessage"] .settings__drawer::-webkit-scrollbar-thumb {
  background: rgba(60, 60, 67, 0.15);
  border-radius: 3px;
}

[data-theme="imessage"] .settings__drawer::-webkit-scrollbar-thumb:hover {
  background: rgba(60, 60, 67, 0.25);
}

/* ============================================
   Theme Selector
   ============================================ */
[data-theme="imessage"] .settings__theme-option {
  background: #ffffff;
  border: 2px solid rgba(60, 60, 67, 0.12);
  border-radius: 12px;
}

[data-theme="imessage"] .settings__theme-option:hover {
  border-color: rgba(60, 60, 67, 0.25);
}

[data-theme="imessage"] .settings__theme-option--active {
  border-color: #007aff;
  background: rgba(0, 122, 255, 0.04);
}

[data-theme="imessage"] .settings__theme-name {
  color: #000000;
  font-weight: 600;
}

[data-theme="imessage"] .settings__theme-desc {
  color: #8e8e93;
}

[data-theme="imessage"] .settings__theme-check {
  background: #007aff;
  color: #ffffff;
}

/* ============================================
   Modal - iOS style centered modal
   ============================================ */
[data-theme="imessage"] .modal-overlay {
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
}

[data-theme="imessage"] .modal {
  background: #ffffff;
  border: none;
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
  padding: 24px;
}

[data-theme="imessage"] .modal h2 {
  font-weight: 600;
  color: #000000;
}

[data-theme="imessage"] .modal p {
  color: #8e8e93;
}

[data-theme="imessage"] .modal input {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
}

[data-theme="imessage"] .modal input:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .modal input::placeholder {
  color: #c7c7cc;
}

[data-theme="imessage"] .modal button {
  background: #007aff;
  border-radius: 10px;
  color: #ffffff;
  font-weight: 600;
}

[data-theme="imessage"] .modal button:hover:not(:disabled) {
  background: #0056b3;
  transform: none;
}

[data-theme="imessage"] .modal a {
  color: #007aff;
}

[data-theme="imessage"] .modal a:hover {
  color: #0056b3;
}

[data-theme="imessage"] .modal__close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
}

[data-theme="imessage"] .modal__close:hover {
  background: rgba(60, 60, 67, 0.12);
  color: #3c3c43;
}

/* ============================================
   Search Overlay - iOS search
   ============================================ */
[data-theme="imessage"] .search-overlay {
  background: rgba(0, 0, 0, 0.3);
}

[data-theme="imessage"] .search-overlay__panel {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

[data-theme="imessage"] .search-overlay__input-row {
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .search-overlay__input {
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
}

[data-theme="imessage"] .search-overlay__input::placeholder {
  color: #c7c7cc;
}

[data-theme="imessage"] .search-overlay__spinner {
  border-color: rgba(60, 60, 67, 0.12);
  border-top-color: #007aff;
}

[data-theme="imessage"] .search-overlay__result:hover {
  background: rgba(0, 122, 255, 0.06);
}

[data-theme="imessage"] .search-overlay__result-snippet mark {
  background: rgba(255, 204, 0, 0.3);
  border-radius: 2px;
}

[data-theme="imessage"] .search-overlay__results::-webkit-scrollbar-thumb {
  background: rgba(60, 60, 67, 0.15);
}

/* ============================================
   Plans Panel
   ============================================ */
[data-theme="imessage"] .plans__panel {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
}

[data-theme="imessage"] .plans__header {
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.18);
  background: rgba(242, 242, 247, 0.94);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
}

[data-theme="imessage"] .plans__icon {
  color: #007aff;
}

[data-theme="imessage"] .plans__title {
  color: #000000;
  font-weight: 700;
}

[data-theme="imessage"] .plans__close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
}

[data-theme="imessage"] .plans__close:hover {
  background: rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .plans__new-btn {
  background: #007aff;
  color: #ffffff;
  border-radius: 10px;
}

[data-theme="imessage"] .plans__new-btn:hover {
  background: #0056b3;
}

[data-theme="imessage"] .plans__item {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 12px;
}

[data-theme="imessage"] .plans__item:hover {
  background: rgba(0, 122, 255, 0.04);
}

[data-theme="imessage"] .plans__status-dot--approved {
  background: #007aff;
}

[data-theme="imessage"] .plans__status-dot--in_progress {
  background: #ff9f0a;
}

[data-theme="imessage"] .plans__status-dot--completed {
  background: #34c759;
}

[data-theme="imessage"] .plans__edit-btn {
  background: transparent;
  border: none;
  color: #007aff;
}

[data-theme="imessage"] .plans__delete-btn {
  background: transparent;
  border: none;
  color: #ff3b30;
}

[data-theme="imessage"] .plans__delete-btn:hover {
  background: rgba(255, 59, 48, 0.06);
}

[data-theme="imessage"] .plans__editor-title,
[data-theme="imessage"] .plans__editor-content {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
}

[data-theme="imessage"] .plans__editor-title:focus,
[data-theme="imessage"] .plans__editor-content:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .plans__error {
  color: #ff3b30;
}

[data-theme="imessage"] .plans__content::-webkit-scrollbar-thumb {
  background: rgba(60, 60, 67, 0.15);
}

/* ============================================
   Tape Deck - Minimal iOS style
   ============================================ */
[data-theme="imessage"] .tape-deck {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 14px;
}

[data-theme="imessage"] .tape-deck__action-btn {
  background: transparent;
  border: none;
  color: #007aff;
  border-radius: 8px;
  box-shadow: none;
}

[data-theme="imessage"] .tape-deck__action-btn:hover {
  background: rgba(0, 122, 255, 0.08);
  color: #007aff;
}

[data-theme="imessage"] .tape-deck__action-btn:active {
  background: rgba(0, 122, 255, 0.15);
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .tape-deck__action-btn--eject.active {
  background: rgba(0, 122, 255, 0.12);
  color: #007aff;
}

[data-theme="imessage"] .tape-deck__action-btn--send {
  background: #007aff;
  border: none;
  color: #ffffff;
}

[data-theme="imessage"] .tape-deck__action-btn--send:hover {
  background: #0056b3;
}

[data-theme="imessage"] .tape-deck__action-btn--mic.recording {
  background: #ff3b30;
  color: #ffffff;
  box-shadow: 0 2px 8px rgba(255, 59, 48, 0.3);
}

[data-theme="imessage"] .tape-deck__input {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 20px;
  color: #000000;
  box-shadow: none;
}

[data-theme="imessage"] .tape-deck__input:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .tape-deck__input::placeholder {
  color: #c7c7cc;
}

[data-theme="imessage"] .tape-deck__empty-slot {
  color: #8e8e93;
  background: rgba(60, 60, 67, 0.06);
  border-radius: 12px;
}

/* ============================================
   Tape Collection - iOS list style
   ============================================ */
[data-theme="imessage"] .tape-collection__drawer {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .tape-collection__new-btn {
  background: #007aff;
  border: none;
  border-radius: 10px;
  color: #ffffff;
}

[data-theme="imessage"] .tape-collection__new-btn:hover {
  background: #0056b3;
}

[data-theme="imessage"] .tape-collection__search-input {
  background: rgba(118, 118, 128, 0.12);
  border: none;
  border-radius: 10px;
  color: #000000;
}

[data-theme="imessage"] .tape-collection__item--match {
  outline-color: #ff9f0a;
}

[data-theme="imessage"] .tape-collection__delete-btn {
  background: #ff3b30;
  border: none;
  border-radius: 8px;
  color: #ffffff;
}

[data-theme="imessage"] .tape-collection__delete-btn:hover {
  background: #ff453a;
}

[data-theme="imessage"] .tape-collection__context-btn {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 8px;
  color: #8e8e93;
}

[data-theme="imessage"] .tape-collection__context-btn--active {
  background: rgba(0, 122, 255, 0.1);
  border: none;
  color: #007aff;
}

[data-theme="imessage"] .tape-collection__confirm-content {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 14px;
  color: #000000;
}

[data-theme="imessage"] .tape-collection__confirm-ok {
  background: #007aff;
  border: none;
  color: #ffffff;
}

[data-theme="imessage"] .tape-collection__confirm-cancel {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  color: #000000;
}

/* ============================================
   Media Library
   ============================================ */
[data-theme="imessage"] .media-library__drawer {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .modal--media-library {
  background: #ffffff;
  border: none;
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
}

[data-theme="imessage"] .modal--media-library .modal__header h2 {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 700;
  font-style: normal;
  text-transform: none;
  letter-spacing: -0.01em;
  color: #000000;
}

[data-theme="imessage"] .modal--media-library .modal__close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
  box-shadow: none;
}

[data-theme="imessage"] .modal--media-library .modal__close:hover {
  background: rgba(60, 60, 67, 0.12);
  border: none;
  color: #3c3c43;
}

[data-theme="imessage"] .media-library__sort {
  background: rgba(118, 118, 128, 0.12);
  border: none;
  border-radius: 8px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__count {
  background: transparent;
  border: none;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  color: #8e8e93;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__grid {
  background: transparent;
  border: none;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__item {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

[data-theme="imessage"] .media-library__item:hover {
  background: #ffffff;
  border-color: #007aff;
  transform: scale(1.02);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

[data-theme="imessage"] .media-library__thumbnail {
  border-radius: 10px;
  border: none;
}

[data-theme="imessage"] .media-library__item-overlay {
  background: linear-gradient(transparent 40%, rgba(255, 255, 255, 0.95));
}

[data-theme="imessage"] .media-library__item-name {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 500;
  font-size: 12px;
  color: #000000;
  text-transform: none;
  letter-spacing: 0;
}

[data-theme="imessage"] .media-library__item-date {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-size: 11px;
  text-transform: none;
  color: #8e8e93;
}

[data-theme="imessage"] .media-library__empty p {
  color: #8e8e93;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
}

/* Lightbox */
[data-theme="imessage"] .media-library__lightbox {
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(10px);
}

[data-theme="imessage"] .media-library__lightbox-content {
  background: #ffffff;
  border: none;
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

[data-theme="imessage"] .media-library__lightbox-close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__lightbox-close:hover {
  background: rgba(60, 60, 67, 0.12);
  border: none;
  color: #3c3c43;
}

[data-theme="imessage"] .media-library__lightbox-main {
  background: #f2f2f7;
  border-right: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .media-library__lightbox-sidebar {
  background: #ffffff;
  border-left: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .media-library__lightbox-filename {
  background: #f2f2f7;
  border: none;
  border-radius: 8px;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 500;
  color: #000000;
  text-transform: none;
  letter-spacing: 0;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__lightbox-meta {
  background: #f2f2f7;
  border: none;
  border-radius: 8px;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: #8e8e93;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__lightbox-heading {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  font-style: normal;
  color: #000000;
  text-transform: none;
  letter-spacing: 0;
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .media-library__lightbox-description {
  background: #f2f2f7;
  border: none;
  border-radius: 8px;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #3c3c43;
  box-shadow: none;
}

[data-theme="imessage"] .media-library__lightbox-no-analysis {
  background: #f2f2f7;
  border: none;
  border-radius: 8px;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: #8e8e93;
  text-transform: none;
  letter-spacing: 0;
}

/* ============================================
   Image Lightbox (standalone)
   ============================================ */
[data-theme="imessage"] .lightbox-overlay {
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(10px);
}

[data-theme="imessage"] .lightbox-content {
  background: #ffffff;
  border: none;
  border-radius: 14px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

[data-theme="imessage"] .lightbox-close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
  box-shadow: none;
}

[data-theme="imessage"] .lightbox-close:hover {
  background: rgba(60, 60, 67, 0.12);
  border: none;
  color: #3c3c43;
}

[data-theme="imessage"] .lightbox-image-container {
  background: #f2f2f7;
}

[data-theme="imessage"] .lightbox-image {
  border-radius: 8px;
  border: none;
}

[data-theme="imessage"] .lightbox-sidebar {
  background: #ffffff;
  border-left: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .lightbox-sidebar h3 {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  color: #000000;
  text-transform: none;
  letter-spacing: 0;
}

[data-theme="imessage"] .lightbox-sidebar p {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #3c3c43;
}

[data-theme="imessage"] .lightbox-nav {
  background: rgba(60, 60, 67, 0.06);
  border-radius: 50%;
  color: #000000;
}

[data-theme="imessage"] .lightbox-nav:hover {
  background: rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .lightbox-info-bar {
  background: #ffffff;
  border-top: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .lightbox-filename {
  color: #000000;
}

[data-theme="imessage"] .lightbox-counter {
  color: #8e8e93;
}

/* ============================================
   Liner Notes - iOS Notes app style
   ============================================ */
[data-theme="imessage"] .liner-notes__panel {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
}

[data-theme="imessage"] .liner-notes__close {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 50%;
  color: #8e8e93;
  box-shadow: none;
}

[data-theme="imessage"] .liner-notes__close:hover {
  background: rgba(60, 60, 67, 0.12);
  color: #3c3c43;
}

[data-theme="imessage"] .liner-notes__tape-label {
  background: #ffffff;
  border-radius: 12px;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .liner-notes__rendered {
  color: #000000;
}

[data-theme="imessage"] .liner-notes__h1 {
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.18);
}

[data-theme="imessage"] .liner-notes__code-block {
  background: #f2f2f7;
  color: #000000;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 8px;
}

[data-theme="imessage"] .liner-notes__textarea {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
}

[data-theme="imessage"] .liner-notes__textarea:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .liner-notes__btn--edit {
  background: transparent;
  border: none;
  color: #007aff;
}

[data-theme="imessage"] .liner-notes__btn--save {
  background: #007aff;
  border: none;
  border-radius: 8px;
  color: #ffffff;
}

[data-theme="imessage"] .liner-notes__btn--cancel {
  background: rgba(60, 60, 67, 0.06);
  border: none;
  border-radius: 8px;
  color: #000000;
}

[data-theme="imessage"] .liner-notes__btn--clear {
  background: transparent;
  border: none;
  color: #ff3b30;
}

[data-theme="imessage"] .liner-notes__content::-webkit-scrollbar-thumb {
  background: rgba(60, 60, 67, 0.15);
}

/* ============================================
   Activity Feed - iOS notification style
   ============================================ */
[data-theme="imessage"] .activity-feed {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: saturate(180%) blur(20px);
  -webkit-backdrop-filter: saturate(180%) blur(20px);
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 14px;
}

[data-theme="imessage"] .activity-feed__header {
  border-bottom: 0.5px solid rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .activity-feed__title {
  color: #8e8e93;
}

[data-theme="imessage"] .activity-feed__toggle {
  color: #007aff;
}

[data-theme="imessage"] .activity-feed__toggle:hover {
  background: rgba(0, 122, 255, 0.06);
}

[data-theme="imessage"] .activity-feed__item--running {
  background: rgba(0, 122, 255, 0.04);
}

[data-theme="imessage"] .activity-feed__item--error {
  background: rgba(255, 59, 48, 0.04);
}

[data-theme="imessage"] .activity-feed__spinner {
  border-color: rgba(60, 60, 67, 0.12);
  border-top-color: #007aff;
}

[data-theme="imessage"] .activity-feed__check {
  color: #34c759;
}

[data-theme="imessage"] .activity-feed__error {
  color: #ff3b30;
}

/* ============================================
   Job Status Bar
   ============================================ */
[data-theme="imessage"] .job-status-bar {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
}

[data-theme="imessage"] .job-status-bar__item:hover {
  background: rgba(0, 122, 255, 0.04);
}

[data-theme="imessage"] .job-status-bar__spinner {
  border-color: rgba(60, 60, 67, 0.12);
  border-top-color: #007aff;
}

[data-theme="imessage"] .job-status-bar__prompt {
  color: #3c3c43;
}

[data-theme="imessage"] .job-status-bar__time {
  color: #8e8e93;
}

[data-theme="imessage"] .job-status-bar__badge {
  background: rgba(0, 122, 255, 0.08);
  color: #007aff;
}

[data-theme="imessage"] .job-status-bar__icon--completed {
  color: #34c759;
}

[data-theme="imessage"] .job-status-bar__icon--failed {
  color: #ff3b30;
}

/* ============================================
   Onboarding - iOS welcome screen
   ============================================ */
[data-theme="imessage"] .onboarding {
  background: #f2f2f7;
  background-image: none;
}

[data-theme="imessage"] .onboarding__container {
  background: #ffffff;
  border: none;
  border-radius: 14px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  padding: 32px;
}

[data-theme="imessage"] .onboarding__progress {
  background: rgba(120, 120, 128, 0.16);
  border: none;
  border-radius: 2px;
  height: 4px;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__progress-bar {
  background: #007aff;
  border-radius: 2px;
}

[data-theme="imessage"] .onboarding__title {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 700;
  font-style: normal;
  text-transform: none;
  letter-spacing: -0.02em;
  color: #000000;
}

[data-theme="imessage"] .onboarding__subtitle {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #8e8e93;
}

[data-theme="imessage"] .onboarding__subtitle a {
  color: #007aff;
  font-weight: 400;
}

[data-theme="imessage"] .onboarding__back {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  color: #007aff;
}

[data-theme="imessage"] .onboarding__back:hover {
  color: #0056b3;
}

[data-theme="imessage"] .onboarding__option {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 12px;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__option:hover {
  background: rgba(0, 122, 255, 0.04);
  border-color: #007aff;
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__option--primary {
  background: #007aff;
  border-color: #007aff;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__option--primary:hover {
  background: #0056b3;
}

[data-theme="imessage"] .onboarding__option-icon {
  background: rgba(0, 122, 255, 0.08);
  border: none;
  border-radius: 10px;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__option--primary .onboarding__option-icon {
  background: rgba(255, 255, 255, 0.2);
  border: none;
}

[data-theme="imessage"] .onboarding__option-title {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  color: #000000;
}

[data-theme="imessage"] .onboarding__option--primary .onboarding__option-title {
  color: #ffffff;
}

[data-theme="imessage"] .onboarding__option-desc {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #8e8e93;
}

[data-theme="imessage"] .onboarding__option--primary .onboarding__option-desc {
  color: rgba(255, 255, 255, 0.7);
}

[data-theme="imessage"] .onboarding__input {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 10px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__input:focus {
  border-color: #007aff;
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.12);
}

[data-theme="imessage"] .onboarding__button {
  background: #007aff;
  border: none;
  border-radius: 12px;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0;
  color: #ffffff;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__button:hover:not(:disabled) {
  background: #0056b3;
  transform: none;
  box-shadow: none;
  filter: none;
}

[data-theme="imessage"] .onboarding__button:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__tutorial-icon kbd {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 6px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 500;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
}

[data-theme="imessage"] .onboarding__wake-word,
[data-theme="imessage"] .onboarding__tutorial-word {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 700;
  font-style: normal;
  color: #007aff;
}

[data-theme="imessage"] .onboarding__step-label {
  background: rgba(0, 122, 255, 0.08);
  border: none;
  border-radius: 6px;
  color: #007aff;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__feature-title {
  font-family: -apple-system, 'SF Pro Display', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  color: #000000;
}

[data-theme="imessage"] .onboarding__feature-demo,
[data-theme="imessage"] .onboarding__feature-list {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 12px;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__drop-zone-demo {
  background: rgba(118, 118, 128, 0.08);
  border: 1px dashed rgba(60, 60, 67, 0.25);
  border-radius: 12px;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__drop-zone-demo svg {
  color: #c7c7cc;
}

[data-theme="imessage"] .onboarding__drop-zone-demo span {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #8e8e93;
}

[data-theme="imessage"] .onboarding__toggle {
  background: #ffffff;
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 10px;
}

[data-theme="imessage"] .onboarding__toggle:hover {
  background: rgba(0, 122, 255, 0.04);
}

[data-theme="imessage"] .onboarding__toggle-slider {
  background: rgba(120, 120, 128, 0.16);
  border: none;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__toggle-slider::before {
  background: #ffffff;
  border: none;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15), 0 1px 1px rgba(0, 0, 0, 0.06);
}

[data-theme="imessage"] .onboarding__toggle input:checked + .onboarding__toggle-slider {
  background: #34c759;
}

[data-theme="imessage"] .onboarding__toggle-label {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  color: #000000;
}

[data-theme="imessage"] .onboarding__toggle-desc {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  color: #8e8e93;
}

[data-theme="imessage"] .onboarding__nav-back {
  background: transparent;
  border: none;
  border-radius: 10px;
  color: #007aff;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__nav-back:hover {
  background: rgba(0, 122, 255, 0.06);
  transform: none;
  box-shadow: none;
}

[data-theme="imessage"] .onboarding__skip {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
  color: #8e8e93;
}

[data-theme="imessage"] .onboarding__skip:hover {
  color: #007aff;
}

/* ============================================
   Talk Button - iOS style
   ============================================ */
[data-theme="imessage"] .talk-button {
  background: #f2f2f7;
  border: none;
  border-radius: 12px;
  color: #007aff;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

[data-theme="imessage"] .talk-button::before {
  display: none;
}

[data-theme="imessage"] .talk-button:hover:not(:disabled) {
  background: #e5e5ea;
  border: none;
  transform: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

[data-theme="imessage"] .talk-button:active:not(:disabled),
[data-theme="imessage"] .talk-button--active {
  background: #007aff;
  border: none;
  color: #ffffff;
  transform: none;
  box-shadow: 0 2px 12px rgba(0, 122, 255, 0.3);
}

[data-theme="imessage"] .talk-button--active::before,
[data-theme="imessage"] .talk-button--active::after {
  display: none;
}

[data-theme="imessage"] .talk-button__label {
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0;
}

/* ============================================
   File Drop Zone - iOS style
   ============================================ */
[data-theme="imessage"] .dropzone-overlay {
  background: rgba(0, 122, 255, 0.08);
  border: 2px dashed rgba(0, 122, 255, 0.4);
  backdrop-filter: blur(8px);
}

[data-theme="imessage"] .dropzone-overlay__content {
  color: #007aff;
  text-shadow: none;
}

[data-theme="imessage"] .dropzone-files {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 14px;
}

[data-theme="imessage"] .dropzone-file__thumb-wrap {
  border: 0.5px solid rgba(60, 60, 67, 0.12);
  border-radius: 8px;
}

[data-theme="imessage"] .dropzone-file__remove {
  background: rgba(60, 60, 67, 0.06);
  border-radius: 50%;
}

[data-theme="imessage"] .dropzone-file__remove:hover {
  background: rgba(255, 59, 48, 0.08);
  color: #ff3b30;
}

[data-theme="imessage"] .dropzone-file__analyzing-badge {
  background: rgba(0, 122, 255, 0.85);
  border-radius: 8px;
}

[data-theme="imessage"] .dropzone-file--analyzing .dropzone-file__thumb-wrap {
  border-color: #007aff;
  box-shadow: 0 0 8px rgba(0, 122, 255, 0.2);
}

[data-theme="imessage"] .dropzone-files__add:hover {
  border-color: #007aff;
  color: #007aff;
  background: rgba(0, 122, 255, 0.04);
}

/* ============================================
   Floating Record Button (FAB) - mobile
   ============================================ */
@media (max-width: 480px) {
  [data-theme="imessage"] .app__record-fab {
    background: #007aff;
    border: none;
    box-shadow: 0 4px 16px rgba(0, 122, 255, 0.3);
  }

  [data-theme="imessage"] .app__record-fab svg {
    fill: white;
  }

  [data-theme="imessage"] .app__record-fab-resize {
    background: rgba(60, 60, 67, 0.2);
    border: none;
  }

  [data-theme="imessage"] .app__record-fab--recording {
    background: #ff3b30;
    box-shadow: 0 4px 16px rgba(255, 59, 48, 0.4);
    animation: imessage-fab-recording 1.2s ease-in-out infinite;
  }

  @keyframes imessage-fab-recording {
    0%, 100% { box-shadow: 0 4px 16px rgba(255, 59, 48, 0.4); }
    50% { box-shadow: 0 4px 24px rgba(255, 59, 48, 0.6); }
  }

  [data-theme="imessage"] .app__record-fab--tap-to-talk {
    animation: imessage-fab-tap 1.5s ease-in-out infinite;
  }

  @keyframes imessage-fab-tap {
    0%, 100% { transform: scale(1); box-shadow: 0 4px 16px rgba(0, 122, 255, 0.3); }
    50% { transform: scale(1.06); box-shadow: 0 4px 20px rgba(0, 122, 255, 0.4); }
  }
}

/* ============================================
   Global Scrollbar
   ============================================ */
[data-theme="imessage"] ::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

[data-theme="imessage"] ::-webkit-scrollbar-track {
  background: transparent;
}

[data-theme="imessage"] ::-webkit-scrollbar-thumb {
  background: rgba(60, 60, 67, 0.15);
  border-radius: 3px;
}

[data-theme="imessage"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(60, 60, 67, 0.25);
}

/* ============================================
   Selection & Focus
   ============================================ */
[data-theme="imessage"] ::selection {
  background: rgba(0, 122, 255, 0.2);
  color: inherit;
}

[data-theme="imessage"] :focus-visible {
  outline: 3px solid rgba(0, 122, 255, 0.4);
  outline-offset: 2px;
}

/* ============================================
   Keyboard Shortcuts
   ============================================ */
[data-theme="imessage"] .keyboard-shortcuts kbd {
  background: #f2f2f7;
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  border-radius: 6px;
  color: #000000;
  font-family: -apple-system, 'SF Pro Text', BlinkMacSystemFont, sans-serif;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
}

/* ============================================
   Scroll to Bottom Button
   ============================================ */
[data-theme="imessage"] .scroll-to-bottom {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 0.5px solid rgba(60, 60, 67, 0.18);
  color: #007aff;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08), 0 0 0 0.5px rgba(0, 0, 0, 0.04);
  font-size: 18px;
}

[data-theme="imessage"] .scroll-to-bottom:hover {
  background: rgba(255, 255, 255, 1);
  border-color: rgba(60, 60, 67, 0.29);
  color: #0056cc;
  transform: scale(1.08);
}

[data-theme="imessage"] .scroll-to-bottom:active {
  transform: scale(0.94);
  background: #e5e5ea;
}
